# RDKit Build Analysis

## Overview

This document provides a comprehensive analysis of the RDKit build artifacts generated by the Docker-based build system. The build uses Ubuntu 25.04 as the base image with miniconda and libmamba resolver for dependency management.

## Build Information

- **RDKit Version**: 2025.03.5
- **Boost Version**: 1.88.0
- **Build Type**: Release
- **Total Build Output Size**: ~51MB of shared libraries (~73MB static libraries)
- **Build Date**: August 31, 2025

## Build Artifacts Summary

### Dynamic Libraries (78 libraries, 51MB total)

The build generates **78 shared libraries** (`.so` files) with proper semantic versioning. All libraries follow the pattern:
- `libRDKitComponent.so` → `libRDKitComponent.so.1` → `libRDKitComponent.so.1.2025.03.5`

#### Key Libraries by Size:

| Library | Size | Purpose |
|---------|------|---------|
| `librdkitcffi.so` | 15MB | CFFI interface for Python/other languages |
| `libRDKitFileParsers.so` | 2.9MB | File format parsers (SDF, MOL, SMILES, etc.) |
| `libRDKitGraphMol.so` | 2.9MB | Core molecular graph functionality |
| `libRDKitInchi.so` | 1.7MB | InChI support and standardization |
| `libRDKitChemReactions.so` | 1.6MB | Chemical reaction handling and templates |
| `libRDKitMolDraw2D.so` | 1.5MB | 2D molecular drawing and rendering |
| `libRDKitMolStandardize.so` | 1.5MB | Molecule standardization utilities |
| `libRDKitFilterCatalog.so` | 1.4MB | Molecular filtering and PAINS detection |
| `libRDKitChemDraw.so` | 1.4MB | ChemDraw integration |
| `libRDKitSubstructLibrary.so` | 1.3MB | Substructure search libraries |

#### Core Functional Categories:

**Molecular Representation & I/O:**
- `libRDKitGraphMol.so` - Core molecular graph
- `libRDKitFileParsers.so` - File format support
- `libRDKitSmilesParse.so` - SMILES parsing
- `libRDKitSLNParse.so` - SLN parsing

**Chemical Operations:**
- `libRDKitChemReactions.so` - Reaction processing
- `libRDKitChemTransforms.so` - Chemical transformations
- `libRDKitMolStandardize.so` - Standardization
- `libRDKitSubstructMatch.so` - Substructure matching

**Descriptors & Analysis:**
- `libRDKitDescriptors.so` - Molecular descriptors
- `libRDKitFingerprints.so` - Molecular fingerprints
- `libRDKitPartialCharges.so` - Charge calculations

**3D & Geometry:**
- `libRDKitDistGeometry.so` - Distance geometry
- `libRDKitMolAlign.so` - 3D alignment
- `libRDKitForceField.so` - Force field calculations
- `libRDKitTrajectory.so` - Trajectory handling

**Visualization:**
- `libRDKitMolDraw2D.so` - 2D rendering
- `libRDKitDepictor.so` - 2D coordinate generation

### Static Libraries (77 libraries)

**77 static libraries** (`.a` files) are available for static linking with `_static.a` naming convention. Total size is approximately 73MB.

### Build Configuration Features

Based on the CMake configuration (`rdkit-config.cmake`):

#### ✅ Enabled Features:
- **Cairo Support** - 2D rendering with Cairo backend
- **Freetype Support** - Font rendering for molecular diagrams
- **InChI Support** - International Chemical Identifier
- **Avalon Support** - Avalon toolkit integration
- **Thread-safe Substructure Search** - Multi-threaded operations
- **SLN Support** - Sybyl Line Notation
- **3D Descriptors** - Three-dimensional molecular descriptors
- **FreeSASA Support** - Solvent accessible surface area calculations
- **CoordGen Support** - 2D coordinate generation
- **Maeparser Support** - Maestro file format
- **MolInterchange Support** - Molecular interchange formats
- **YAeHMOP Support** - Extended Hückel calculations
- **URF Support** - Unit testing framework
- **Optimized POPCNT** - Hardware-optimized bit counting
- **Boost Components**: system, iostreams, serialization

#### ❌ Disabled Features:
- **Python Wrappers** - Not built (intentional for C++ focus)
- **Compressed Suppliers** - Compressed file support
- **StructChecker Support** - Structure validation tools

### Dependencies

- **Boost 1.88.0** with components: headers, system, iostreams, serialization
- **Eigen3** - Required for 3D descriptors
- **Threading support** - POSIX threads

## Testing Infrastructure

- **101 test executables** built and available
- Test coverage for all major components
- Located throughout the `/build/Code/` directory structure

## Usage Notes

### For C++ Development

The build provides both shared and static linking options:

```cmake
# In your CMakeLists.txt
find_package(RDKit REQUIRED)
target_link_libraries(your_target RDKit::GraphMol RDKit::FileParsers)
```

### Include Directory

Headers are properly installed to: `${prefix}/include/rdkit/`

✅ **Headers Available**: With `RDK_INSTALL_INTREE=OFF`, all necessary header files are copied to the install directory for development use.

### CFFI Library

The `librdkitcffi.so` (15MB) provides a C Foreign Function Interface, enabling:
- Python integration (via ctypes/cffi)
- Integration with other languages supporting C FFI
- Language bindings development

## Directory Structure

```
build/rdkit/
├── lib/                          # All shared and static libraries
│   ├── cmake/rdkit/             # CMake configuration files
│   ├── *.so                    # Shared libraries (symlinks)
│   ├── *.so.1                  # Major version symlinks
│   ├── *.so.1.2025.03.5        # Actual shared library files
│   └── *_static.a               # Static libraries
├── include/                      # Header files for development
│   └── rdkit/                   # RDKit header files organized by component
│       ├── GraphMol/            # Molecular graph headers
│       ├── DataStructs/         # Data structure headers
│       ├── RDGeneral/           # Core utility headers
│       └── ...                  # Other component headers
└── share/                        # CMake configuration and data files
    └── RDKit/
        ├── Contrib/             # Community contributions
        ├── Data/                # RDKit data files
        ├── Docs/                # Documentation
        ├── license.txt          # License file
        └── README.md            # RDKit README
```

## Development Considerations

### For Library Users
1. **Dynamic Linking**: Use the `.so` files in `/build/rdkit/lib/` 
2. **Headers**: Include headers from `/build/rdkit/include/rdkit/`
3. **CMake Integration**: Use the provided CMake config files in `/build/rdkit/lib/cmake/rdkit/`

### Complete Development Setup
The installation now provides everything needed for development:
1. ✅ **Headers**: All RDKit headers properly organized in `/build/rdkit/include/rdkit/`
2. ✅ **Libraries**: Both shared and static libraries (78 shared, 77 static)
3. ✅ **CMake Config**: Proper find_package() support in `/build/rdkit/lib/cmake/rdkit/`
4. ✅ **Clean Structure**: Standard installation layout following CMake conventions
5. ✅ **Data Files**: RDKit data files, documentation, and contrib modules in `/build/rdkit/share/RDKit/`

### Performance Notes
- Thread-safe substructure search is enabled
- Optimized POPCNT instructions are used where available
- Release build with optimizations enabled
- CXX11 ABI enabled for modern C++ compatibility

## Build System Details

- **Base Image**: Ubuntu 25.04
- **Package Manager**: Miniconda with libmamba resolver
- **Build Tool**: CMake with Make backend
- **Compiler**: GCC with C++17 standard and CXX11 ABI enabled
- **Docker Multi-stage**: Separate builder and exporter stages
- **Export Strategy**: Alpine-based exporter for artifact collection
- **Installation**: Proper install directory with headers and libraries

This comprehensive build provides a production-ready RDKit installation suitable for C++ applications requiring chemical informatics capabilities.
